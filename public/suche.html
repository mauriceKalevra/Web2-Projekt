<!DOCTYPE html>
<html>
	<head>
		
		<title>Web2-Projekt</title>
		<meta charset="UTF-8">
		<meta name="description" content="Eine Webapp für ein Uni Projekt">
		
		<script src="script.js"></script>
		<!-- Links to local bootstrap files -->
		<link rel="stylesheet" href="static/css/bootstrap.min.css">
		<link rel="stylesheet" href="static/css/bootstrap-grid.min.css">
		<link rel="stylesheet" href="static/css/bootstrap-reboot.min.css">
	  	<link rel="stylesheet" href="stylesheet.css">

		<script>
		//
		//some local scripts
		//
		
		</script>
	</head>

	<body>
    
		<div class="wrapper">
			
			<!--HEADER-->

			<header>
				<p class="tel"><bl>+49 1664254545</bl></p>

				<div class="myNav">
					<nav class="navbar navbar-expand-lg navbar-light bg-light">
					<a class="navbar-brand" href="#"></a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
					  <span class="navbar-toggler-icon"></span>
					</button>

					<div class="collapse navbar-collapse" id="navbarNavDropdown">
					  <ul class="navbar-nav">
						<li class="nav-item active">
						  <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
						</li>
						<li class="nav-item">
						  <a class="nav-link" href="suche.html">Suche</a>
						</li>
						<li class="nav-item">
						  <a class="nav-link" href="biete.html">Biete</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="about.html">Über uns</a>
						  </li>
						  <li class="nav-item">
							<a class="nav-link" href="datenschutz.html">Datenschutz</a>
						  </li>
						  <li class="nav-item">
							<a class="nav-link" href="impressum.html">Impressum</a>
						  </li>
						  <li class="nav-item">
							<a class="nav-link" href="faq.html">FAQ</a>
						  </li>
						<li class="nav-item dropdown">
						  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-expanded="false">
							Mehr
						  </a>
						  <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" href="#">Action</a>
							<a class="dropdown-item" href="#">Another action</a>
							<a class="dropdown-item" href="#">Something else here</a>
						  </div>
						</li>
					  </ul>
					</div>
				  </nav>
					</div>

				
			</header>
			<!--CONTENT/MAIN-->
			<body>
				<main2>
					
						<div class="jumbotron jumbotron-fluid" style="margin-bottom: 0px;">
							<div class="container">
							<div class="row justify-content-center align-items-center">
								<h1 id="logo-text">Immobilien-Suche</h1>
							</div>
							<div class="row justify-content-center align-items-center">
								<p id="logo-subtext">Immobilien-Suche</p>
							</div>
							</div>
					
					</div>
					<div class="row myrow4 justify-content-center align-items-center">
						<div class="col-0">
							<select id="SearchTyp">
								<option value="">Mieten</option>
								<option value="">Kaufen</option>
								</select>
						</div>
						<div class="col-4">

							<input class="form-control" id="SearchOrt" type="text" placeholder="Wo: Ort, Straße">
						</div>
						<div class="col-0">
							<select id="SearchImmoTyp">
								<option value="">Wohnung</option>
								<option value="">Haus</option>
								</select>
						</div>
					</div>
					<div class="row myrow justify-content-center align-items-center">
							<div class="col-0">
								<input class="form-control" id="SearchPreis" type="text" placeholder="Preis bis">

							</div>
							<div class="col-2">
								<input class="form-control" id="SearchZimmer" type="text" placeholder="Zimmer ab">

							</div>
							<div class="col-2">
								<input class="form-control" id="SearchFlaeche" type="text" placeholder="Fläche ab">
							</div>


					</div>
					<div class="row myrow6 justify-content-end align-items-center">
						<div class="col-4"><button id="submitButton" type="submit" name="submit" class="btn btn-primary offset-md-1">Suche</button></div>
					</div>
					<div id="results">

					</div>
					<!--
						finde.html muss ganz weg, suche muss mit DB verknüpft werden und von da dann die "Wohnungen" die aus Biete eingefügt wurden!
						Fragen an Mo:
							Was sind die "Tags" nach denen man sucht, zb. Ort wo Wohnung ist usw.
							Kann Finde.html weg?
					-->
				</main2>
				<script>

					function removeform() {
						const delform = document.getElementById("myform");
						delform.remove();
					}

					function render(){
						const endcard = document.createElement("h1");
		 				endcard.innerText = "Ihre Suchergebnisse:";
		  				endcard.style.textAlign = "center";
		  				const main2 = document.getElementById("main2");
		  				main2.append(endcard);
					}
					
					//getElementByIDs in variable speichern und trimmen
					function registerClickEventForSubmitButton(){
						const submitButton = document.getElementById("submitButton");
						submitButton.addEventListener("click", async (clickEvent) => {
							clickEvent.preventDefault();

							const inSearchTyp = document.getElementById("SearchTyp")
							
							const StringSearchTyp = inSearchTyp.options[inSearchTyp.selectedIndex].text.trim();

							const inSearchOrt = document.getElementById("SearchOrt")
							const StringSearchOrt = inSearchOrt.value.trim();

							const inImmoTyp = document.getElementById("SearchImmoTyp")
							
							const StringSearchImmoTyp = inImmoTyp.options[inImmoTyp.selectedIndex].text.trim();

							const inSearchPreis = document.getElementById("SearchPreis")
							const StringSearchPreis = inSearchPreis.value.trim();

							const inSearchZimmer = document.getElementById("SearchZimmer")
							const StringSearchZimmer = inSearchZimmer.value.trim();

							const inSearchFlaeche = document.getElementById("SearchFlaeche")
							const StringSearchFlaeche = inSearchFlaeche.value.trim();

                            let url = new URL('http://localhost:1337/v1/search')
                            let params = { typ: StringSearchTyp, ort: StringSearchOrt, immotyp: StringSearchImmoTyp, preis: StringSearchPreis, zimmer: StringSearchZimmer, flaeche: StringSearchZimmer}
                            url.search = new URLSearchParams(params).toString();
                            fetch(url)
                        		.then(res => console.log(res.body))
						});
					}
					registerClickEventForSubmitButton();
				</script>
				<!--FOOTER-->
			</body>
			<footer>
				
					<nav class="navbar navbar-expand-lg navbar-light bg-light">
						<a class="navbar-brand" href="#"></a>
						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
						  <span class="navbar-toggler-icon"></span>
						</button>
	
						<div class="collapse navbar-collapse" id="navbarNavDropdown">
						  <ul class="navbar-nav navbar-center">
							<li class="nav-item active">
							  <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
							</li>
							<li class="nav-item">
							  <a class="nav-link" href="suche.html">Suche</a>
							</li>
							<li class="nav-item">
							  <a class="nav-link" href="biete.html">Biete</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="about.html">Über uns</a>
							  </li>
							  <li class="nav-item">
								<a class="nav-link" href="datenschutz.html">Datenschutz</a>
							  </li>
							
							</li>
						  </ul>
						</div>
					  </nav>
						
		<!-- JavaScript/JQuery Scripts -->
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
		<!--Our own scripts-->
		<script src="js/slideshow.js"></script>

	</body>
</html>

